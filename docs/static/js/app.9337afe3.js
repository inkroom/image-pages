(function(){"use strict";var t={41:function(t,e,n){var o=Vue,r=n.n(o),i=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("router-view"),t.$store.state.loading?t._e():e("div",{staticStyle:{"text-align":"center",margin:"15px"}},[e("el-link",{attrs:{type:"primary",href:"https://beian.miit.gov.cn/",target:"_blank"}},[t._v("蜀ICP备17000680号")]),t._v(" @copyright 墨盒")],1)],1)},a=[],l=ELEMENT,s=n.n(l),c={name:"App",watch:{"$store.loading"(t,e){t?console.log("开始loading--wacht"):console.log("关闭loading--watch")}}},u=c,m=n(1),d=(0,m.Z)(u,i,a,!1,null,null,null),p=d.exports,g=VueRouter,h=n.n(g),f=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"covers-container"}},[e("el-row",{attrs:{gutter:20}},t._l(t.covers,(function(n,o){return e("el-col",{key:o,attrs:{xs:24,sm:12,md:6,lg:4,xl:3}},[e("el-card",{style:{cursor:t.album?"auto":"pointer"},nativeOn:{click:function(e){return t.push(n.name)}}},[e("InkImg",{staticStyle:{height:"160px","line-height":"160px"},attrs:{src:t.getImgUrl(n),imgStyle:{maxWidth:"100%",verticalAlign:"middle"}}}),e("div",{staticClass:"text-ellipsis name",staticStyle:{padding:"5px"}},[e("span",{attrs:{title:n.name}},[t._v(t._s(n.name))])])],1)],1)})),1)],1)},v=[],y=function(){var t=this,e=t._self._c;return e("div",{staticClass:"img-container"},[e("el-image",{style:t.imgStyle,attrs:{src:t._f("cdnSrc")(t.src),"preview-src-list":t.srcList,initialIndex:t.initialIndex,lazy:t.lazy,fit:"contain",referrerpolicy:"no-referrer"}},[e("div",{attrs:{slot:"placeholder"},slot:"placeholder"},[e("i",{staticClass:"el-icon-loading"})]),e("div",{attrs:{slot:"error"},slot:"error"},[e("i",{staticClass:"el-icon-picture-outline"})])])],1)},$=[],b={name:"InkImg",props:{src:String,imgStyle:Object,lazy:{type:Boolean,default:!1},srcList:{type:Array,default:()=>[]},initialIndex:Number},filters:{cdnSrc(t){return t}}},x=b,_=(0,m.Z)(x,y,$,!1,null,null,null),w=_.exports,I=n(121),k={components:{InkImg:w},data(){return{limit:{col:6,span:4},covers:[],album:null}},created(){document.title="墨明棋妙",this.getImages()},methods:{push(t){this.$store.commit("loading",!0),console.log("设置loading"),this.$router.push(encodeURIComponent(t))},getImgUrl(t){return t.url?t.url:`${location.protocol}//image.inkroom.cn/raw/${t.name}/${t.cover}`},getImages(){console.log("发送githu");I.Z.get(`${location.protocol}//image.inkroom.cn/raw/config.json?r=${Math.random()}`).then((t=>{console.log(t.data),t=t.data,this.covers=t})).catch((t=>{console.error(t),this.$alert("相册暂不可用")})).finally((t=>{this.$store.commit("loading",!1)}))}}},O=k,S=(0,m.Z)(O,f,v,!1,null,null,null),E=S.exports,L=function(){var t=this,e=t._self._c;return t.$store.state.loading?t._e():e("div",{attrs:{id:"covers-container"}},[e("div",[e("span",{staticStyle:{"vertical-align":"bottom","font-size":"20px"}},[t._v("共 "+t._s(t.covers.length)+" 张")]),e("el-link",{staticClass:"el-link el-link--primary is-underline",staticStyle:{"font-size":"20px"},nativeOn:{click:function(e){return t.home.apply(null,arguments)}}},[t._v("首页")]),e("el-link",{staticStyle:{"font-size":"20px"},attrs:{href:t.url.upload,target:"_blank",type:"primary"}},[t._v("上传图片")])],1),e("el-row",{attrs:{gutter:20}},t._l(t.covers,(function(n,o){return e("el-col",{key:o,attrs:{xs:24,sm:12,md:6,lg:4,xl:3}},[e("el-card",{style:{cursor:t.album?"auto":"pointer"}},[e("InkImg",{staticStyle:{height:"160px","line-height":"160px"},attrs:{src:n.download_url,srcList:t.srcList,imgStyle:{maxWidth:"100%",verticalAlign:"middle"},initialIndex:o,lazy:""}}),e("div",{staticClass:"text-ellipsis name",staticStyle:{padding:"5px"}},[e("span",{attrs:{title:n.name}},[t._v(t._s(n.name))])])],1)],1)})),1)],1)},R=[],U={components:{InkImg:w},data(){return{style:"max-width:260px",limit:{col:6,span:4},url:{upload:`https://github.com/${{NODE_ENV:"production",BASE_URL:"/"}.AUTHOR}/${{NODE_ENV:"production",BASE_URL:"/"}.REPO}/upload/master/${decodeURIComponent(this.$route.params.album)}`},covers:[],title:"墨明棋妙",album:null,ismobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}},watch:{title(t){document.title=this.title+" - "+t}},computed:{srcList(){return this.covers.map((t=>`${location.protocol}//image.inkroom.cn/raw/${encodeURI(t.path)}`))}},destroyed(){window.removeEventListener("popstate",this.popstate)},created(){document.title=`${this.title} - ${this.$route.params.album}`,this.getImages()},methods:{home(){this.$store.commit("loading",!0),this.$router.push("/")},getImages(){I.Z.get(`${location.protocol}//image.inkroom.cn/raw/list/${this.$route.params.album}.list?r=${Math.random()}`).then((t=>{this.covers=t.data.split("\n").filter((t=>!!t&&t.length>1)).map((t=>{var e=t.split("-"),n=`${location.protocol}//image.inkroom.cn/raw/${encodeURI(this.$route.params.album)}/${encodeURI(t)}`;return e.length>1&&(n=JSON.parse(e[e.length-1]).result[0]),{path:`${this.$route.params.album}/${-1==t.indexOf("{")?t:t.substr(0,t.lastIndexOf("{")-1)}`,name:e[0].substr(0,t.lastIndexOf(".")),download_url:n}}))})).catch((t=>(console.log("降级了",t),I.Z.get(`${location.protocol}//image.inkroom.cn/list/${this.$route.params.album}/list?r=${Math.random()}`).then((t=>{this.covers=t.data.split("\r\n").map((t=>({path:`${this.$route.params.album}/${t}`,name:t.substr(0,t.lastIndexOf(".")),download_url:`${location.protocol}//image.inkroom.cn/raw/${encodeURI(this.$route.params.album)}/${encodeURI(t)}`})))}))))).catch((t=>{this.$alert(` ${this.$route.params.album} 暂不可用`),console.error(t)})).finally((t=>{this.$store.commit("loading",!1)}))},popstate(){return history.pushState(null,null,document.URL),this.dialog.visible=!1,window.removeEventListener("popstate",this.popstate),!1}}},C=U,P=(0,m.Z)(C,L,R,!1,null,null,null),j=P.exports;r().use(h());const A=[{path:"/",name:"/",component:E},{path:"/:album",name:"/album",component:j}],M=new(h())({mode:"history",base:"/",routes:A});var Z=M,z=n(629);r().use(s()),r().config.productionTip=!1,r().use(z.ZP);let N=!1;N=s().Loading.service({text:"正在努力加载中..."});let T=new z.ZP.Store({state:{loading:!0},getters:{},mutations:{loading(t,e){t.loading=e,e?N=s().Loading.service({text:"正在努力加载中..."}):(console.log("关闭loading"),N&&N.close(),N=null)}},actions:{},modules:{}});new(r())({router:Z,store:T,render:function(t){return t(p)}}).$mount("#app")}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={exports:{}};return t[o](i,i.exports,n),i.exports}n.m=t,function(){var t=[];n.O=function(e,o,r,i){if(!o){var a=1/0;for(u=0;u<t.length;u++){o=t[u][0],r=t[u][1],i=t[u][2];for(var l=!0,s=0;s<o.length;s++)(!1&i||a>=i)&&Object.keys(n.O).every((function(t){return n.O[t](o[s])}))?o.splice(s--,1):(l=!1,i<a&&(a=i));if(l){t.splice(u--,1);var c=r();void 0!==c&&(e=c)}}return e}i=i||0;for(var u=t.length;u>0&&t[u-1][2]>i;u--)t[u]=t[u-1];t[u]=[o,r,i]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,o){var r,i,a=o[0],l=o[1],s=o[2],c=0;if(a.some((function(e){return 0!==t[e]}))){for(r in l)n.o(l,r)&&(n.m[r]=l[r]);if(s)var u=s(n)}for(e&&e(o);c<a.length;c++)i=a[c],n.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return n.O(u)},o=self["webpackChunks"]=self["webpackChunks"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(41)}));o=n.O(o)})();